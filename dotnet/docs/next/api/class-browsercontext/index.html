<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/dotnet/blog/rss.xml" title="Playwright Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/dotnet/blog/atom.xml" title="Playwright Blog Atom Feed">
<script src="/dotnet/js/redirection.js"></script><title data-react-helmet="true">BrowserContext | Playwright</title><meta data-react-helmet="true" property="og:url" content="https://playwright.dev/dotnet/docs/next/api/class-browsercontext"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="BrowserContext | Playwright"><meta data-react-helmet="true" name="description" content="* extends: [EventEmitter]"><meta data-react-helmet="true" property="og:description" content="* extends: [EventEmitter]"><link data-react-helmet="true" rel="shortcut icon" href="/dotnet/img/playwright-logo.svg"><link data-react-helmet="true" rel="canonical" href="https://playwright.dev/dotnet/docs/next/api/class-browsercontext"><link data-react-helmet="true" rel="alternate" href="https://playwright.dev/dotnet/docs/next/api/class-browsercontext" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://playwright.dev/dotnet/docs/next/api/class-browsercontext" hreflang="x-default"><link rel="stylesheet" href="/dotnet/assets/css/styles.a56bfd42.css">
<link rel="preload" href="/dotnet/assets/js/runtime~main.ae36188d.js" as="script">
<link rel="preload" href="/dotnet/assets/js/main.d81bbe0d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/dotnet/"><img src="/dotnet/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/dotnet/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Playwright for .NET</strong></a><a class="navbar__item navbar__link" href="/dotnet/docs/next/intro">Docs</a><a class="navbar__item navbar__link navbar__link--active" href="/dotnet/docs/next/api/class-playwright">API</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/dotnet/docs/next/why-playwright">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/dotnet/docs/next/api/class-browsercontext">Next</a></li><li><a class="dropdown__link" href="/dotnet/docs/api/class-browsercontext">1.12.0</a></li><li><a class="dropdown__link" href="/dotnet/versions">All versions</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">.NET</a><ul class="dropdown__menu"><li><a href="/dotnet/docs/next/api/class-browsercontext" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">.NET</a></li><li><a href="/docs/next/api/class-browsercontext" target="_self" rel="noopener noreferrer" class="dropdown__link">Node.js</a></li><li><a href="/python/docs/next/api/class-browsercontext" target="_self" rel="noopener noreferrer" class="dropdown__link">Python</a></li><li><a href="/java/docs/next/api/class-browsercontext" target="_self" rel="noopener noreferrer" class="dropdown__link">Java</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_2P1H"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_3atr searchBarLoadingRing_1FtX"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/dotnet/"><img src="/dotnet/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/dotnet/img/playwright-logo.svg" alt="Playwright logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Playwright for .NET</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/dotnet/docs/next/intro">Docs</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/dotnet/docs/next/api/class-playwright">API</a></li><li class="menu__list-item"><a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/dotnet/docs/next/api/class-browsercontext">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/dotnet/docs/api/class-browsercontext">1.12.0</a></li><li class="menu__list-item"><a class="menu__link" href="/dotnet/versions">All versions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">.NET</a><ul class="menu__list"><li class="menu__list-item"><a href="/dotnet/docs/next/api/class-browsercontext" target="_self" rel="noopener noreferrer" class="menu__link menu__link--active">.NET</a></li><li class="menu__list-item"><a href="/docs/next/api/class-browsercontext" target="_self" rel="noopener noreferrer" class="menu__link">Node.js</a></li><li class="menu__list-item"><a href="/python/docs/next/api/class-browsercontext" target="_self" rel="noopener noreferrer" class="menu__link">Python</a></li><li class="menu__list-item"><a href="/java/docs/next/api/class-browsercontext" target="_self" rel="noopener noreferrer" class="menu__link">Java</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">API reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-playwright">Playwright</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Classes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-browser">Browser</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/dotnet/docs/next/api/class-browsercontext">BrowserContext</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-browsertype">BrowserType</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-consolemessage">ConsoleMessage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-dialog">Dialog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-download">Download</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-elementhandle">ElementHandle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-filechooser">FileChooser</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-frame">Frame</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-jshandle">JSHandle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-keyboard">Keyboard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-mouse">Mouse</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-page">Page</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-request">Request</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-response">Response</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-route">Route</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-selectors">Selectors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-timeouterror">TimeoutError</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-touchscreen">Touchscreen</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-tracing">Tracing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-video">Video</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-websocket">WebSocket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-websocketframe">WebSocketFrame</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/docs/next/api/class-worker">Worker</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Playwright <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/dotnet/docs/api/class-browsercontext">latest version</a></strong> (1.12.0).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_3a4h">BrowserContext</h1></header><div class="markdown"><ul><li>extends: <a href="https://nodejs.org/api/events.html#events_class_eventemitter" target="_blank" rel="noopener noreferrer" title="EventEmitter">EventEmitter</a></li></ul><p>BrowserContexts provide a way to operate multiple independent browser sessions.</p><p>If a page opens another page, e.g. with a <code>window.open</code> call, the popup will belong to the parent page&#x27;s browser context.</p><p>Playwright allows creation of &quot;incognito&quot; browser contexts with <code>browser.newContext()</code> method. &quot;Incognito&quot; browser contexts don&#x27;t write any browsing data to disk.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">using var playwright = await Playwright.CreateAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">var browser = await playwright.Firefox.LaunchAsync(new BrowserTypeLaunchOptions { Headless = false });</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Create a new incognito browser context</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">var context = await browser.NewContextAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Create a new page inside context.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">var page = await context.NewPageAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await page.GotoAsync(&quot;https://bing.com&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Dispose context once it is no longer needed.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await context.CloseAsync();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-event-close">event BrowserContext.Close</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-event-page">event BrowserContext.Page</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-event-request">event BrowserContext.Request</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-event-request-failed">event BrowserContext.RequestFailed</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-event-request-finished">event BrowserContext.RequestFinished</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-event-response">event BrowserContext.Response</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-add-cookies">BrowserContext.AddCookiesAsync(cookies)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-add-init-script">BrowserContext.AddInitScriptAsync(script)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-browser">BrowserContext.Browser</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-clear-cookies">BrowserContext.ClearCookiesAsync()</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-clear-permissions">BrowserContext.ClearPermissionsAsync()</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-close">BrowserContext.CloseAsync()</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-cookies">BrowserContext.CookiesAsync(urls)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-expose-binding">BrowserContext.ExposeBindingAsync(name, callback, options)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-expose-function">BrowserContext.ExposeFunctionAsync(name, callback)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-grant-permissions">BrowserContext.GrantPermissionsAsync(permissions, options)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-new-page">BrowserContext.NewPageAsync()</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-pages">BrowserContext.Pages</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-route">BrowserContext.RouteAsync(url, handler)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-wait-for-page">BrowserContext.RunAndWaitForPageAsync(action, options)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-set-default-navigation-timeout">BrowserContext.SetDefaultNavigationTimeout(timeout)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-set-default-timeout">BrowserContext.SetDefaultTimeout(timeout)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-set-extra-http-headers">BrowserContext.SetExtraHTTPHeadersAsync(headers)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-set-geolocation">BrowserContext.SetGeolocationAsync(geolocation)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-set-offline">BrowserContext.SetOfflineAsync(offline)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-storage-state">BrowserContext.StorageStateAsync(options)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-unroute">BrowserContext.UnrouteAsync(url, handler)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-wait-for-page">BrowserContext.WaitForPageAsync(action, options)</a></li><li><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-tracing">BrowserContext.Tracing</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-event-close"></a>event BrowserContext.Close<a class="hash-link" href="#browser-context-event-close" title="Direct link to heading">#</a></h2><ul><li>type: &lt;<a title="BrowserContext" href="/dotnet/docs/next/api/class-browsercontext">BrowserContext</a>&gt;</li></ul><p>Emitted when Browser context gets closed. This might happen because of one of the following:</p><ul><li>Browser context is closed.</li><li>Browser application is closed or crashed.</li><li>The <a href="/dotnet/docs/next/api/class-browser#browser-close">Browser.CloseAsync()</a> method was called.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-event-page"></a>event BrowserContext.Page<a class="hash-link" href="#browser-context-event-page" title="Direct link to heading">#</a></h2><ul><li>type: &lt;<a title="Page" href="/dotnet/docs/next/api/class-page">Page</a>&gt;</li></ul><p>The event is emitted when a new Page is created in the BrowserContext. The page may still be loading. The event will also fire for popup pages. See also <a href="/dotnet/docs/next/api/class-page#page-event-popup">event Page.Popup</a> to receive events about popups relevant to a specific page.</p><p>The earliest moment that page is available is when it has navigated to the initial url. For example, when opening a popup with <code>window.open(&#x27;http://example.com&#x27;)</code>, this event will fire when the network request to &quot;<a href="http://example.com%22" target="_blank" rel="noopener noreferrer">http://example.com&quot;</a> is done and its response has started loading in the popup.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">var popup = await context.RunAndWaitForPageAsync(async =&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    await page.ClickAsync(&quot;a&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">});</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Console.WriteLine(await popup.EvaluateAsync&lt;string&gt;(&quot;location.href&quot;));</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Use <a href="/dotnet/docs/next/api/class-page#page-wait-for-load-state">Page.WaitForLoadStateAsync(state, options)</a> to wait until the page gets to a particular state (you should not need it in most cases).</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-event-request"></a>event BrowserContext.Request<a class="hash-link" href="#browser-context-event-request" title="Direct link to heading">#</a></h2><ul><li>type: &lt;<a title="Request" href="/dotnet/docs/next/api/class-request">Request</a>&gt;</li></ul><p>Emitted when a request is issued from any pages created through this context. The <a title="Request" href="/dotnet/docs/next/api/class-request">request</a> object is read-only. To only listen for requests from a particular page, use <a href="/dotnet/docs/next/api/class-page#page-event-request">event Page.Request</a>.</p><p>In order to intercept and mutate requests, see <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-route">BrowserContext.RouteAsync(url, handler)</a> or <a href="/dotnet/docs/next/api/class-page#page-route">Page.RouteAsync(url, handler)</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-event-request-failed"></a>event BrowserContext.RequestFailed<a class="hash-link" href="#browser-context-event-request-failed" title="Direct link to heading">#</a></h2><ul><li>type: &lt;<a title="Request" href="/dotnet/docs/next/api/class-request">Request</a>&gt;</li></ul><p>Emitted when a request fails, for example by timing out. To only listen for failed requests from a particular page, use <a href="/dotnet/docs/next/api/class-page#page-event-request-failed">event Page.RequestFailed</a>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>HTTP Error responses, such as 404 or 503, are still successful responses from HTTP standpoint, so request will complete with <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-event-request-finished">event BrowserContext.RequestFinished</a> event and not with <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-event-request-failed">event BrowserContext.RequestFailed</a>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-event-request-finished"></a>event BrowserContext.RequestFinished<a class="hash-link" href="#browser-context-event-request-finished" title="Direct link to heading">#</a></h2><ul><li>type: &lt;<a title="Request" href="/dotnet/docs/next/api/class-request">Request</a>&gt;</li></ul><p>Emitted when a request finishes successfully after downloading the response body. For a successful response, the sequence of events is <code>request</code>, <code>response</code> and <code>requestfinished</code>. To listen for successful requests from a particular page, use <a href="/dotnet/docs/next/api/class-page#page-event-request-finished">event Page.RequestFinished</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-event-response"></a>event BrowserContext.Response<a class="hash-link" href="#browser-context-event-response" title="Direct link to heading">#</a></h2><ul><li>type: &lt;<a title="Response" href="/dotnet/docs/next/api/class-response">Response</a>&gt;</li></ul><p>Emitted when <a title="Response" href="/dotnet/docs/next/api/class-response">response</a> status and headers are received for a request. For a successful response, the sequence of events is <code>request</code>, <code>response</code> and <code>requestfinished</code>. To listen for response events from a particular page, use <a href="/dotnet/docs/next/api/class-page#page-event-response">event Page.Response</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-add-cookies"></a>BrowserContext.AddCookiesAsync(cookies)<a class="hash-link" href="#browser-context-add-cookies" title="Direct link to heading">#</a></h2><ul><li><code>cookies</code> &lt;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.ienumerable?view=net-5.0" target="_blank" rel="noopener noreferrer" title="IEnumerable">IEnumerable</a>&lt;<code>Cookie</code>&gt;&gt;<ul><li><code>Name</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;</li><li><code>Value</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;</li><li><code>Url</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>?&gt; either url or domain / path are required. Optional.</li><li><code>Domain</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>?&gt; either url or domain / path are required Optional.</li><li><code>Path</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>?&gt; either url or domain / path are required Optional.</li><li><code>Expires</code> &lt;[double]?&gt; Unix time in seconds. Optional.</li><li><code>HttpOnly</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a>?&gt; Optional.</li><li><code>Secure</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a>?&gt; Optional.</li><li><code>SameSite</code> &lt;&quot;Strict&quot;|&quot;Lax&quot;|&quot;None&quot;&gt; Optional.</li></ul></li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>Adds cookies into this browser context. All pages within this context will have these cookies installed. Cookies can be obtained via <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-cookies">BrowserContext.CookiesAsync(urls)</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">await context.AddCookiesAsync(new[] { cookie1, cookie2 });</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-add-init-script"></a>BrowserContext.AddInitScriptAsync(script)<a class="hash-link" href="#browser-context-add-init-script" title="Direct link to heading">#</a></h2><ul><li><code>script</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt; Script to be evaluated in all pages in the browser context.</li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>Adds a script which would be evaluated in one of the following scenarios:</p><ul><li>Whenever a page is created in the browser context or is navigated.</li><li>Whenever a child frame is attached or navigated in any page in the browser context. In this case, the script is evaluated in the context of the newly attached frame.</li></ul><p>The script is evaluated after the document was created but before any of its scripts were run. This is useful to amend the JavaScript environment, e.g. to seed <code>Math.random</code>.</p><p>An example of overriding <code>Math.random</code> before the page loads:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// preload.js</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(80, 250, 123)">random</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token number">42</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">await context.AddInitScriptAsync(new BrowserContextAddInitScriptOptions { ScriptPath = &quot;preload.js&quot; });</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The order of evaluation of multiple scripts installed via <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-add-init-script">BrowserContext.AddInitScriptAsync(script)</a> and <a href="/dotnet/docs/next/api/class-page#page-add-init-script">Page.AddInitScriptAsync(script)</a> is not defined.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-browser"></a>BrowserContext.Browser<a class="hash-link" href="#browser-context-browser" title="Direct link to heading">#</a></h2><ul><li>returns: &lt;<a title="Browser" href="/dotnet/docs/next/api/class-browser">Browser</a>?&gt;</li></ul><p>Returns the browser instance of the context. If it was launched as a persistent context null gets returned.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-clear-cookies"></a>BrowserContext.ClearCookiesAsync()<a class="hash-link" href="#browser-context-clear-cookies" title="Direct link to heading">#</a></h2><ul><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>Clears context cookies.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-clear-permissions"></a>BrowserContext.ClearPermissionsAsync()<a class="hash-link" href="#browser-context-clear-permissions" title="Direct link to heading">#</a></h2><ul><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>Clears all permission overrides for the browser context.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">var context = await browser.NewContextAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await context.GrantPermissionsAsync(new[] { &quot;clipboard-read&quot; });</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Alternatively, you can use the helper class ContextPermissions </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//  to specify the permissions...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// do stuff ...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await context.ClearPermissionsAsync();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-close"></a>BrowserContext.CloseAsync()<a class="hash-link" href="#browser-context-close" title="Direct link to heading">#</a></h2><ul><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>Closes the browser context. All the pages that belong to the browser context will be closed.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The default browser context cannot be closed.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-cookies"></a>BrowserContext.CookiesAsync(urls)<a class="hash-link" href="#browser-context-cookies" title="Direct link to heading">#</a></h2><ul><li><code>urls</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>?|<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.ienumerable?view=net-5.0" target="_blank" rel="noopener noreferrer" title="IEnumerable">IEnumerable</a>?&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;&gt; Optional list of URLs.</li><li>returns: &lt;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.ienumerable?view=net-5.0" target="_blank" rel="noopener noreferrer" title="IEnumerable">IEnumerable</a>&lt;<code>Cookie</code>&gt;&gt;<ul><li><code>name</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;</li><li><code>value</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;</li><li><code>domain</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;</li><li><code>path</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;</li><li><code>expires</code> &lt;[double]&gt; Unix time in seconds.</li><li><code>httpOnly</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a>&gt;</li><li><code>secure</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a>&gt;</li><li><code>sameSite</code> &lt;&quot;Strict&quot;|&quot;Lax&quot;|&quot;None&quot;&gt;</li></ul></li></ul><p>If no URLs are specified, this method returns all cookies. If URLs are specified, only cookies that affect those URLs are returned.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-expose-binding"></a>BrowserContext.ExposeBindingAsync(name, callback, options)<a class="hash-link" href="#browser-context-expose-binding" title="Direct link to heading">#</a></h2><ul><li><code>name</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt; Name of the function on the window object.</li><li><code>callback</code> &lt;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.action-1?view=net-5.0" target="_blank" rel="noopener noreferrer" title="Action">Action</a>&lt;BindingSource, T, <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1?view=net-5.0" target="_blank" rel="noopener noreferrer" title="TResult">TResult</a>&gt;&gt; Callback function that will be called in the Playwright&#x27;s context.</li><li><code>options</code> &lt;<code>BrowserContextExposeBindingOptions?</code>&gt;<ul><li><code>Handle</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a>?&gt; Whether to pass the argument as a handle, instead of passing by value. When passing a handle, only one argument is supported. When passing by value, multiple arguments are supported.</li></ul></li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>The method adds a function called <code>name</code> on the <code>window</code> object of every frame in every page in the context. When called, the function executes <code>callback</code> and returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a> which resolves to the return value of <code>callback</code>. If the <code>callback</code> returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>, it will be awaited.</p><p>The first argument of the <code>callback</code> function contains information about the caller: <code>{ browserContext: BrowserContext, page: Page, frame: Frame }</code>.</p><p>See <a href="/dotnet/docs/next/api/class-page#page-expose-binding">Page.ExposeBindingAsync(name, callback, options)</a> for page-only version.</p><p>An example of exposing page URL to all frames in all pages in the context:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">using Microsoft.Playwright;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">using System.Threading.Tasks;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">class Program</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    public static async Task Main()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        using var playwright = await Playwright.CreateAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        var browser = await playwright.Webkit.LaunchAsync(new BrowserTypeLaunchOptions { Headless = false });</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        var context = await browser.NewContextAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        await context.ExposeBindingAsync(&quot;pageURL&quot;, source =&gt; source.Page.Url);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        var page = await context.NewPageAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        await page.SetContentAsync(&quot;&lt;script&gt;\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;  async function onClick() {\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;    document.querySelector(&#x27;div&#x27;).textContent = await window.pageURL();\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;  }\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;&lt;/script&gt;\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;&lt;button onclick=\&quot;onClick()\&quot;&gt;Click me&lt;/button&gt;\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;&lt;div&gt;&lt;/div&gt;&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        await page.ClickAsync(&quot;button&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>An example of passing an element handle:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">var result = new TaskCompletionSource&lt;string&gt;();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">var page = await Context.NewPageAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await Context.ExposeBindingAsync(&quot;clicked&quot;, async (BindingSource _, IJSHandle t) =&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    return result.TrySetResult(await t.AsElement().TextContentAsync());</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">});</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await page.SetContentAsync(&quot;&lt;script&gt;\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;  document.addEventListener(&#x27;click&#x27;, event =&gt; window.clicked(event.target));\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;&lt;/script&gt;\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;&lt;div&gt;Click me&lt;/div&gt;\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;&lt;div&gt;Or click me&lt;/div&gt;\n&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await page.ClickAsync(&quot;div&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// Note: it makes sense to await the result here, because otherwise, the context </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//  gets closed and the binding function will throw an exception.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Assert.Equal(&quot;Click me&quot;, await result.Task);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-expose-function"></a>BrowserContext.ExposeFunctionAsync(name, callback)<a class="hash-link" href="#browser-context-expose-function" title="Direct link to heading">#</a></h2><ul><li><code>name</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt; Name of the function on the window object.</li><li><code>callback</code> &lt;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.action-1?view=net-5.0" target="_blank" rel="noopener noreferrer" title="Action">Action</a>&lt;T, <a href="https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1?view=net-5.0" target="_blank" rel="noopener noreferrer" title="TResult">TResult</a>&gt;&gt; Callback function that will be called in the Playwright&#x27;s context.</li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>The method adds a function called <code>name</code> on the <code>window</code> object of every frame in every page in the context. When called, the function executes <code>callback</code> and returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a> which resolves to the return value of <code>callback</code>.</p><p>If the <code>callback</code> returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>, it will be awaited.</p><p>See <a href="/dotnet/docs/next/api/class-page#page-expose-function">Page.ExposeFunctionAsync(name, callback)</a> for page-only version.</p><p>An example of adding a <code>sha256</code> function to all pages in the context:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">using Microsoft.Playwright;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">using System;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">using System.Security.Cryptography;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">using System.Threading.Tasks;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">class BrowserContextExamples</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    public static async Task Main()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        using var playwright = await Playwright.CreateAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        var browser = await playwright.Webkit.LaunchAsync(new BrowserTypeLaunchOptions { Headless = false });</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        var context = await browser.NewContextAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        await context.ExposeFunctionAsync(&quot;sha256&quot;, (string input) =&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            return Convert.ToBase64String(</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                SHA256.Create().ComputeHash(System.Text.Encoding.UTF8.GetBytes(input)));</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        });</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        var page = await context.NewPageAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        await page.SetContentAsync(&quot;&lt;script&gt;\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;  async function onClick() {\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;    document.querySelector(&#x27;div&#x27;).textContent = await window.sha256(&#x27;PLAYWRIGHT&#x27;);\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;  }\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;&lt;/script&gt;\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;&lt;button onclick=\&quot;onClick()\&quot;&gt;Click me&lt;/button&gt;\n&quot; +</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;&lt;div&gt;&lt;/div&gt;&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        await page.ClickAsync(&quot;button&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        Console.WriteLine(await page.TextContentAsync(&quot;div&quot;));</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-grant-permissions"></a>BrowserContext.GrantPermissionsAsync(permissions, options)<a class="hash-link" href="#browser-context-grant-permissions" title="Direct link to heading">#</a></h2><ul><li><code>permissions</code> &lt;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.ienumerable?view=net-5.0" target="_blank" rel="noopener noreferrer" title="IEnumerable">IEnumerable</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;&gt; A permission or an array of permissions to grant. Permissions can be one of the following values:<ul><li><code>&#x27;geolocation&#x27;</code></li><li><code>&#x27;midi&#x27;</code></li><li><code>&#x27;midi-sysex&#x27;</code> (system-exclusive midi)</li><li><code>&#x27;notifications&#x27;</code></li><li><code>&#x27;push&#x27;</code></li><li><code>&#x27;camera&#x27;</code></li><li><code>&#x27;microphone&#x27;</code></li><li><code>&#x27;background-sync&#x27;</code></li><li><code>&#x27;ambient-light-sensor&#x27;</code></li><li><code>&#x27;accelerometer&#x27;</code></li><li><code>&#x27;gyroscope&#x27;</code></li><li><code>&#x27;magnetometer&#x27;</code></li><li><code>&#x27;accessibility-events&#x27;</code></li><li><code>&#x27;clipboard-read&#x27;</code></li><li><code>&#x27;clipboard-write&#x27;</code></li><li><code>&#x27;payment-handler&#x27;</code></li></ul></li><li><code>options</code> &lt;<code>BrowserContextGrantPermissionsOptions?</code>&gt;<ul><li><code>Origin</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>?&gt; The <a href="https://developer.mozilla.org/en-US/docs/Glossary/Origin" target="_blank" rel="noopener noreferrer" title="Origin">origin</a> to grant permissions to, e.g. &quot;<a href="https://example.com%22" target="_blank" rel="noopener noreferrer">https://example.com&quot;</a>.</li></ul></li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>Grants specified permissions to the browser context. Only grants corresponding permissions to the given origin if specified.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-new-page"></a>BrowserContext.NewPageAsync()<a class="hash-link" href="#browser-context-new-page" title="Direct link to heading">#</a></h2><ul><li>returns: &lt;<a title="Page" href="/dotnet/docs/next/api/class-page">Page</a>&gt;</li></ul><p>Creates a new page in the browser context.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-pages"></a>BrowserContext.Pages<a class="hash-link" href="#browser-context-pages" title="Direct link to heading">#</a></h2><ul><li>returns: &lt;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.ienumerable?view=net-5.0" target="_blank" rel="noopener noreferrer" title="IEnumerable">IEnumerable</a>&lt;<a title="Page" href="/dotnet/docs/next/api/class-page">Page</a>&gt;&gt;</li></ul><p>Returns all open pages in the context.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-route"></a>BrowserContext.RouteAsync(url, handler)<a class="hash-link" href="#browser-context-route" title="Direct link to heading">#</a></h2><ul><li><code>url</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>|[Regex]|<a href="https://docs.microsoft.com/en-us/dotnet/api/system.func-2?view=net-5.0" target="_blank" rel="noopener noreferrer" title="Func">Func</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>, bool&gt;&gt; A glob pattern, regex pattern or predicate receiving <a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener noreferrer" title="URL">URL</a> to match while routing.</li><li><code>handler</code> &lt;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.action-1?view=net-5.0" target="_blank" rel="noopener noreferrer" title="Action">Action</a>&lt;<a title="Route" href="/dotnet/docs/next/api/class-route">Route</a>&gt;&gt; handler function to route the request.</li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>Routing provides the capability to modify network requests that are made by any page in the browser context. Once route is enabled, every request matching the url pattern will stall unless it&#x27;s continued, fulfilled or aborted.</p><p>An example of a naive handler that aborts all image requests:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">var context = await browser.NewContextAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">var page = await context.NewPageAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await context.RouteAsync(&quot;**/*.{png,jpg,jpeg}&quot;, r =&gt; r.AbortAsync());</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await page.GotoAsync(&quot;https://theverge.com&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await browser.CloseAsync();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>or the same snippet using a regex pattern instead:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">var context = await browser.NewContextAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">var page = await context.NewPageAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await context.RouteAsync(new Regex(&quot;(\\.png$)|(\\.jpg$)&quot;), r =&gt; r.AbortAsync());</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await page.GotoAsync(&quot;https://theverge.com&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">await browser.CloseAsync();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>It is possible to examine the request to decide the route action. For example, mocking all requests that contain some post data, and leaving all other requests as is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">await page.RouteAsync(&quot;/api/**&quot;, async r =&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    if (r.Request.PostData.Contains(&quot;my-string&quot;))</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        await r.FulfillAsync(body: &quot;mocked-data&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    else</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        await r.ContinueAsync();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Page routes (set up with <a href="/dotnet/docs/next/api/class-page#page-route">Page.RouteAsync(url, handler)</a>) take precedence over browser context routes when request matches both handlers.</p><p>To remove a route with its handler you can use <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-unroute">BrowserContext.UnrouteAsync(url, handler)</a>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Enabling routing disables http cache.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-wait-for-page"></a>BrowserContext.RunAndWaitForPageAsync(action, options)<a class="hash-link" href="#browser-context-wait-for-page" title="Direct link to heading">#</a></h2><ul><li><code>options</code> &lt;<code>BrowserContextRunAndWaitForPageOptions?</code>&gt;<ul><li><code>Predicate</code> &lt;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.func-2?view=net-5.0" target="_blank" rel="noopener noreferrer" title="Func">Func</a>&lt;<a title="Page" href="/dotnet/docs/next/api/class-page">Page</a>?, bool&gt;&gt; Receives the <a title="Page" href="/dotnet/docs/next/api/class-page">Page</a> object and resolves to truthy value when the waiting should resolve.</li><li><code>Timeout</code> &lt;[double]?&gt; Maximum time to wait for in milliseconds. Defaults to <code>30000</code> (30 seconds). Pass <code>0</code> to disable timeout. The default value can be changed by using the <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-set-default-timeout">BrowserContext.SetDefaultTimeout(timeout)</a>.</li></ul></li><li><code>action</code> &lt;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.func-2?view=net-5.0" target="_blank" rel="noopener noreferrer" title="Func">Func</a>&lt;[Task]&gt;&gt; Action that triggers the event.</li><li>returns: &lt;<a title="Page" href="/dotnet/docs/next/api/class-page">Page</a>&gt;</li></ul><p>Performs action and waits for a new <a title="Page" href="/dotnet/docs/next/api/class-page">Page</a> to be created in the context. If predicate is provided, it passes <a title="Page" href="/dotnet/docs/next/api/class-page">Page</a> value into the <code>predicate</code> function and waits for <code>predicate(event)</code> to return a truthy value. Will throw an error if the context closes before new <a title="Page" href="/dotnet/docs/next/api/class-page">Page</a> is created.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-wait-for-page"></a>BrowserContext.WaitForPageAsync(action, options)<a class="hash-link" href="#browser-context-wait-for-page" title="Direct link to heading">#</a></h2><ul><li><code>action</code> &lt;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.func-2?view=net-5.0" target="_blank" rel="noopener noreferrer" title="Func">Func</a>&lt;[Task]&gt;&gt; Action that triggers the event.</li><li>returns: &lt;<a title="Page" href="/dotnet/docs/next/api/class-page">Page</a>&gt;</li></ul><p>Performs action and waits for a new <a title="Page" href="/dotnet/docs/next/api/class-page">Page</a> to be created in the context. If predicate is provided, it passes <a title="Page" href="/dotnet/docs/next/api/class-page">Page</a> value into the <code>predicate</code> function and waits for <code>predicate(event)</code> to return a truthy value. Will throw an error if the context closes before new <a title="Page" href="/dotnet/docs/next/api/class-page">Page</a> is created.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-set-default-navigation-timeout"></a>BrowserContext.SetDefaultNavigationTimeout(timeout)<a class="hash-link" href="#browser-context-set-default-navigation-timeout" title="Direct link to heading">#</a></h2><ul><li><code>timeout</code> &lt;[double]&gt; Maximum navigation time in milliseconds</li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>This setting will change the default maximum navigation time for the following methods and related shortcuts:</p><ul><li><a href="/dotnet/docs/next/api/class-page#page-go-back">Page.GoBackAsync(options)</a></li><li><a href="/dotnet/docs/next/api/class-page#page-go-forward">Page.GoForwardAsync(options)</a></li><li><a href="/dotnet/docs/next/api/class-page#page-goto">Page.GotoAsync(url, options)</a></li><li><a href="/dotnet/docs/next/api/class-page#page-reload">Page.ReloadAsync(options)</a></li><li><a href="/dotnet/docs/next/api/class-page#page-set-content">Page.SetContentAsync(html, options)</a></li><li><a href="/dotnet/docs/next/api/class-page#page-wait-for-navigation">Page.RunAndWaitForNavigationAsync(action, options)</a></li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><a href="/dotnet/docs/next/api/class-page#page-set-default-navigation-timeout">Page.SetDefaultNavigationTimeout(timeout)</a> and <a href="/dotnet/docs/next/api/class-page#page-set-default-timeout">Page.SetDefaultTimeout(timeout)</a> take priority over <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-set-default-navigation-timeout">BrowserContext.SetDefaultNavigationTimeout(timeout)</a>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-set-default-timeout"></a>BrowserContext.SetDefaultTimeout(timeout)<a class="hash-link" href="#browser-context-set-default-timeout" title="Direct link to heading">#</a></h2><ul><li><code>timeout</code> &lt;[double]&gt; Maximum time in milliseconds</li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>This setting will change the default maximum time for all the methods accepting <code>timeout</code> option.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><a href="/dotnet/docs/next/api/class-page#page-set-default-navigation-timeout">Page.SetDefaultNavigationTimeout(timeout)</a>, <a href="/dotnet/docs/next/api/class-page#page-set-default-timeout">Page.SetDefaultTimeout(timeout)</a> and <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-set-default-navigation-timeout">BrowserContext.SetDefaultNavigationTimeout(timeout)</a> take priority over <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-set-default-timeout">BrowserContext.SetDefaultTimeout(timeout)</a>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-set-extra-http-headers"></a>BrowserContext.SetExtraHTTPHeadersAsync(headers)<a class="hash-link" href="#browser-context-set-extra-http-headers" title="Direct link to heading">#</a></h2><ul><li><code>headers</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="noopener noreferrer" title="Map">Map</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;&gt; An object containing additional HTTP headers to be sent with every request. All header values must be strings.</li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>The extra HTTP headers will be sent with every request initiated by any page in the context. These headers are merged with page-specific extra HTTP headers set with <a href="/dotnet/docs/next/api/class-page#page-set-extra-http-headers">Page.SetExtraHTTPHeadersAsync(headers)</a>. If page overrides a particular header, page-specific header value will be used instead of the browser context header value.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><a href="/dotnet/docs/next/api/class-browsercontext#browser-context-set-extra-http-headers">BrowserContext.SetExtraHTTPHeadersAsync(headers)</a> does not guarantee the order of headers in the outgoing requests.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-set-geolocation"></a>BrowserContext.SetGeolocationAsync(geolocation)<a class="hash-link" href="#browser-context-set-geolocation" title="Direct link to heading">#</a></h2><ul><li><code>geolocation</code> &lt;Geolocation?&gt;<ul><li><code>Latitude</code> &lt;[double]&gt; Latitude between -90 and 90.</li><li><code>Longitude</code> &lt;[double]&gt; Longitude between -180 and 180.</li><li><code>Accuracy</code> &lt;[double]?&gt; Non-negative accuracy value. Defaults to <code>0</code>.</li></ul></li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>Sets the context&#x27;s geolocation. Passing <code>null</code> or <code>undefined</code> emulates position unavailable.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly csharp"><div tabindex="0" class="prism-code language-csharp codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">await context.SetGeolocationAsync(new Geolocation()</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    Latitude = 59.95f,</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    Longitude = 30.31667f</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Consider using <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-grant-permissions">BrowserContext.GrantPermissionsAsync(permissions, options)</a> to grant permissions for the browser context pages to read its geolocation.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-set-offline"></a>BrowserContext.SetOfflineAsync(offline)<a class="hash-link" href="#browser-context-set-offline" title="Direct link to heading">#</a></h2><ul><li><code>offline</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a>&gt; Whether to emulate network being offline for the browser context.</li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-storage-state"></a>BrowserContext.StorageStateAsync(options)<a class="hash-link" href="#browser-context-storage-state" title="Direct link to heading">#</a></h2><ul><li><code>options</code> &lt;<code>BrowserContextStorageStateOptions?</code>&gt;<ul><li><code>Path</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>?&gt; The file path to save the storage state to. If <code>path</code> is a relative path, then it is resolved relative to current working directory. If no path is provided, storage state is still returned, but won&#x27;t be saved to the disk.</li></ul></li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;</li></ul><p>Returns storage state for this browser context, contains current cookies and local storage snapshot.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-unroute"></a>BrowserContext.UnrouteAsync(url, handler)<a class="hash-link" href="#browser-context-unroute" title="Direct link to heading">#</a></h2><ul><li><code>url</code> &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>|[Regex]|<a href="https://docs.microsoft.com/en-us/dotnet/api/system.func-2?view=net-5.0" target="_blank" rel="noopener noreferrer" title="Func">Func</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>, bool&gt;&gt; A glob pattern, regex pattern or predicate receiving <a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener noreferrer" title="URL">URL</a> used to register a routing with <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-route">BrowserContext.RouteAsync(url, handler)</a>.</li><li><code>handler</code> &lt;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.action-1?view=net-5.0" target="_blank" rel="noopener noreferrer" title="Action">Action</a>&lt;<a title="Route" href="/dotnet/docs/next/api/class-route">Route</a>?&gt;&gt; Optional handler function used to register a routing with <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-route">BrowserContext.RouteAsync(url, handler)</a>.</li><li>returns: &lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;</li></ul><p>Removes a route created with <a href="/dotnet/docs/next/api/class-browsercontext#browser-context-route">BrowserContext.RouteAsync(url, handler)</a>. When <code>handler</code> is not specified, removes all routes for the <code>url</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="browser-context-tracing"></a>BrowserContext.Tracing<a class="hash-link" href="#browser-context-tracing" title="Direct link to heading">#</a></h2><ul><li>type: &lt;<a title="Tracing" href="/dotnet/docs/next/api/class-tracing">Tracing</a>&gt;</li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/dotnet/docs/next/api/class-browser"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Browser</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/dotnet/docs/next/api/class-browsertype"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">BrowserType Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#browser-context-event-close" class="table-of-contents__link">event BrowserContext.Close</a></li><li><a href="#browser-context-event-page" class="table-of-contents__link">event BrowserContext.Page</a></li><li><a href="#browser-context-event-request" class="table-of-contents__link">event BrowserContext.Request</a></li><li><a href="#browser-context-event-request-failed" class="table-of-contents__link">event BrowserContext.RequestFailed</a></li><li><a href="#browser-context-event-request-finished" class="table-of-contents__link">event BrowserContext.RequestFinished</a></li><li><a href="#browser-context-event-response" class="table-of-contents__link">event BrowserContext.Response</a></li><li><a href="#browser-context-add-cookies" class="table-of-contents__link">BrowserContext.AddCookiesAsync(cookies)</a></li><li><a href="#browser-context-add-init-script" class="table-of-contents__link">BrowserContext.AddInitScriptAsync(script)</a></li><li><a href="#browser-context-browser" class="table-of-contents__link">BrowserContext.Browser</a></li><li><a href="#browser-context-clear-cookies" class="table-of-contents__link">BrowserContext.ClearCookiesAsync()</a></li><li><a href="#browser-context-clear-permissions" class="table-of-contents__link">BrowserContext.ClearPermissionsAsync()</a></li><li><a href="#browser-context-close" class="table-of-contents__link">BrowserContext.CloseAsync()</a></li><li><a href="#browser-context-cookies" class="table-of-contents__link">BrowserContext.CookiesAsync(urls)</a></li><li><a href="#browser-context-expose-binding" class="table-of-contents__link">BrowserContext.ExposeBindingAsync(name, callback, options)</a></li><li><a href="#browser-context-expose-function" class="table-of-contents__link">BrowserContext.ExposeFunctionAsync(name, callback)</a></li><li><a href="#browser-context-grant-permissions" class="table-of-contents__link">BrowserContext.GrantPermissionsAsync(permissions, options)</a></li><li><a href="#browser-context-new-page" class="table-of-contents__link">BrowserContext.NewPageAsync()</a></li><li><a href="#browser-context-pages" class="table-of-contents__link">BrowserContext.Pages</a></li><li><a href="#browser-context-route" class="table-of-contents__link">BrowserContext.RouteAsync(url, handler)</a></li><li><a href="#browser-context-wait-for-page" class="table-of-contents__link">BrowserContext.RunAndWaitForPageAsync(action, options)</a></li><li><a href="#browser-context-wait-for-page" class="table-of-contents__link">BrowserContext.WaitForPageAsync(action, options)</a></li><li><a href="#browser-context-set-default-navigation-timeout" class="table-of-contents__link">BrowserContext.SetDefaultNavigationTimeout(timeout)</a></li><li><a href="#browser-context-set-default-timeout" class="table-of-contents__link">BrowserContext.SetDefaultTimeout(timeout)</a></li><li><a href="#browser-context-set-extra-http-headers" class="table-of-contents__link">BrowserContext.SetExtraHTTPHeadersAsync(headers)</a></li><li><a href="#browser-context-set-geolocation" class="table-of-contents__link">BrowserContext.SetGeolocationAsync(geolocation)</a></li><li><a href="#browser-context-set-offline" class="table-of-contents__link">BrowserContext.SetOfflineAsync(offline)</a></li><li><a href="#browser-context-storage-state" class="table-of-contents__link">BrowserContext.StorageStateAsync(options)</a></li><li><a href="#browser-context-unroute" class="table-of-contents__link">BrowserContext.UnrouteAsync(url, handler)</a></li><li><a href="#browser-context-tracing" class="table-of-contents__link">BrowserContext.Tracing</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/dotnet/docs/intro">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/dotnet/docs/api/class-playwright">API reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/playwright" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://aka.ms/playwright-slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/playwrightweb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/microsoft/playwright-sharp" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Microsoft</div></div></div></footer></div>
<script src="/dotnet/assets/js/runtime~main.ae36188d.js"></script>
<script src="/dotnet/assets/js/main.d81bbe0d.js"></script>
</body>
</html>