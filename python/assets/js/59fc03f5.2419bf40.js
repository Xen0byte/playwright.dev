(self.webpackChunkplaywright_dev=self.webpackChunkplaywright_dev||[]).push([[3386],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return c},kt:function(){return h}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(a),h=r,u=d["".concat(s,".").concat(h)]||d[h]||m[h]||o;return a?n.createElement(u,i(i({ref:t},c),{},{components:a})):n.createElement(u,i({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8215:function(e,t,a){"use strict";var n=a(7294);t.Z=function(e){var t=e.children,a=e.hidden,r=e.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:r},t)}},1395:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var n=a(7294),r=a(944),o=a(6010),i="tabItem_1uMI",l="tabItemActive_2DSg";var s=37,p=39;var c=function(e){var t=e.lazy,a=e.block,c=e.defaultValue,m=e.values,d=e.groupId,h=e.className,u=(0,r.Z)(),k=u.tabGroupChoices,g=u.setTabGroupChoices,y=(0,n.useState)(c),w=y[0],b=y[1],N=n.Children.toArray(e.children),f=[];if(null!=d){var x=k[d];null!=x&&x!==w&&m.some((function(e){return e.value===x}))&&b(x)}var v=function(e){var t=e.currentTarget,a=f.indexOf(t),n=m[a].value;b(n),null!=d&&(g(d,n),setTimeout((function(){var e,a,n,r,o,i,s,p;(e=t.getBoundingClientRect(),a=e.top,n=e.left,r=e.bottom,o=e.right,i=window,s=i.innerHeight,p=i.innerWidth,a>=0&&o<=p&&r<=s&&n>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(l),setTimeout((function(){return t.classList.remove(l)}),2e3))}),150))},_=function(e){var t,a;switch(e.keyCode){case p:var n=f.indexOf(e.target)+1;a=f[n]||f[0];break;case s:var r=f.indexOf(e.target)-1;a=f[r]||f[f.length-1]}null==(t=a)||t.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},h)},m.map((function(e){var t=e.value,a=e.label;return n.createElement("li",{role:"tab",tabIndex:w===t?0:-1,"aria-selected":w===t,className:(0,o.Z)("tabs__item",i,{"tabs__item--active":w===t}),key:t,ref:function(e){return f.push(e)},onKeyDown:_,onFocus:v,onClick:v},a)}))),t?(0,n.cloneElement)(N.filter((function(e){return e.props.value===w}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},N.map((function(e,t){return(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==w})}))))}},9443:function(e,t,a){"use strict";var n=(0,a(7294).createContext)(void 0);t.Z=n},944:function(e,t,a){"use strict";var n=a(7294),r=a(9443);t.Z=function(){var e=(0,n.useContext)(r.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},6613:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return d}});var n=a(2122),r=a(9756),o=(a(7294),a(3905)),i=a(1395),l=a(8215),s={id:"class-browsercontext",title:"BrowserContext"},p={unversionedId:"api/class-browsercontext",id:"version-1.9.0/api/class-browsercontext",isDocsHomePage:!1,title:"BrowserContext",description:"* extends: [EventEmitter]",source:"@site/versioned_docs/version-1.9.0/api/class-browsercontext.mdx",sourceDirName:"api",slug:"/api/class-browsercontext",permalink:"/python/docs/1.9.0/api/class-browsercontext",version:"1.9.0",frontMatter:{id:"class-browsercontext",title:"BrowserContext"},sidebar:"version-1.9.0/api",previous:{title:"Browser",permalink:"/python/docs/1.9.0/api/class-browser"},next:{title:"BrowserType",permalink:"/python/docs/1.9.0/api/class-browsertype"}},c=[{value:"browser_context.on(&quot;close&quot;)",id:"browser_contextonclose",children:[]},{value:"browser_context.on(&quot;page&quot;)",id:"browser_contextonpage",children:[]},{value:"browser_context.add_cookies(cookies)",id:"browser_contextadd_cookiescookies",children:[]},{value:"browser_context.add_init_script(**kwargs)",id:"browser_contextadd_init_scriptkwargs",children:[]},{value:"browser_context.browser",id:"browser_contextbrowser",children:[]},{value:"browser_context.clear_cookies()",id:"browser_contextclear_cookies",children:[]},{value:"browser_context.clear_permissions()",id:"browser_contextclear_permissions",children:[]},{value:"browser_context.close()",id:"browser_contextclose",children:[]},{value:"browser_context.cookies(**kwargs)",id:"browser_contextcookieskwargs",children:[]},{value:"browser_context.expect_event(event, **kwargs)",id:"browser_contextexpect_eventevent-kwargs",children:[]},{value:"browser_context.expect_page(**kwargs)",id:"browser_contextexpect_pagekwargs",children:[]},{value:"browser_context.expose_binding(name, callback, **kwargs)",id:"browser_contextexpose_bindingname-callback-kwargs",children:[]},{value:"browser_context.expose_function(name, callback)",id:"browser_contextexpose_functionname-callback",children:[]},{value:"browser_context.grant_permissions(permissions, **kwargs)",id:"browser_contextgrant_permissionspermissions-kwargs",children:[]},{value:"browser_context.new_page()",id:"browser_contextnew_page",children:[]},{value:"browser_context.pages",id:"browser_contextpages",children:[]},{value:"browser_context.route(url, handler)",id:"browser_contextrouteurl-handler",children:[]},{value:"browser_context.set_default_navigation_timeout(timeout)",id:"browser_contextset_default_navigation_timeouttimeout",children:[]},{value:"browser_context.set_default_timeout(timeout)",id:"browser_contextset_default_timeouttimeout",children:[]},{value:"browser_context.set_extra_http_headers(headers)",id:"browser_contextset_extra_http_headersheaders",children:[]},{value:"browser_context.set_geolocation(geolocation)",id:"browser_contextset_geolocationgeolocation",children:[]},{value:"browser_context.set_offline(offline)",id:"browser_contextset_offlineoffline",children:[]},{value:"browser_context.storage_state(**kwargs)",id:"browser_contextstorage_statekwargs",children:[]},{value:"browser_context.unroute(url, **kwargs)",id:"browser_contextunrouteurl-kwargs",children:[]},{value:"browser_context.wait_for_event(event, **kwargs)",id:"browser_contextwait_for_eventevent-kwargs",children:[]}],m={toc:c};function d(e){var t=e.components,a=(0,r.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"extends: ",(0,o.kt)("a",{parentName:"li",href:"https://pyee.readthedocs.io/en/latest/#pyee.BaseEventEmitter",title:"EventEmitter"},"EventEmitter"))),(0,o.kt)("p",null,"BrowserContexts provide a way to operate multiple independent browser sessions."),(0,o.kt)("p",null,"If a page opens another page, e.g. with a ",(0,o.kt)("inlineCode",{parentName:"p"},"window.open")," call, the popup will belong to the parent page's browser context."),(0,o.kt)("p",null,'Playwright allows creation of "incognito" browser contexts with ',(0,o.kt)("inlineCode",{parentName:"p"},"browser.newContext()"),' method. "Incognito" browser contexts don\'t write any browsing data to disk.'),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'# create a new incognito browser context\ncontext = browser.new_context()\n# create a new page inside context.\npage = context.new_page()\npage.goto("https://example.com")\n# dispose context once it"s no longer needed.\ncontext.close()\n'))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'# create a new incognito browser context\ncontext = await browser.new_context()\n# create a new page inside context.\npage = await context.new_page()\nawait page.goto("https://example.com")\n# dispose context once it"s no longer needed.\nawait context.close()\n')))),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextonclose"},'browser_context.on("close")')),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextonpage"},'browser_context.on("page")')),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextadd_cookiescookies"},"browser_context.add_cookies(cookies)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextadd_init_scriptkwargs"},"browser_context.add_init_script(**kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextbrowser"},"browser_context.browser")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextclear_cookies"},"browser_context.clear_cookies()")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextclear_permissions"},"browser_context.clear_permissions()")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextclose"},"browser_context.close()")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextcookieskwargs"},"browser_context.cookies(**kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextexpect_eventevent-kwargs"},"browser_context.expect_event(event, **kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextexpect_pagekwargs"},"browser_context.expect_page(**kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextexpose_bindingname-callback-kwargs"},"browser_context.expose_binding(name, callback, **kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextexpose_functionname-callback"},"browser_context.expose_function(name, callback)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextgrant_permissionspermissions-kwargs"},"browser_context.grant_permissions(permissions, **kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextnew_page"},"browser_context.new_page()")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextpages"},"browser_context.pages")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextrouteurl-handler"},"browser_context.route(url, handler)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_default_navigation_timeouttimeout"},"browser_context.set_default_navigation_timeout(timeout)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_default_timeouttimeout"},"browser_context.set_default_timeout(timeout)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_extra_http_headersheaders"},"browser_context.set_extra_http_headers(headers)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_geolocationgeolocation"},"browser_context.set_geolocation(geolocation)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_offlineoffline"},"browser_context.set_offline(offline)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextstorage_statekwargs"},"browser_context.storage_state(**kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextunrouteurl-kwargs"},"browser_context.unroute(url, **kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextwait_for_eventevent-kwargs"},"browser_context.wait_for_event(event, **kwargs)"))),(0,o.kt)("h2",{id:"browser_contextonclose"},'browser_context.on("close")'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"type: <",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext",title:"BrowserContext"},"BrowserContext"),">")),(0,o.kt)("p",null,"Emitted when Browser context gets closed. This might happen because of one of the following:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Browser context is closed."),(0,o.kt)("li",{parentName:"ul"},"Browser application is closed or crashed."),(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browser#browserclose"},"browser.close()")," method was called.")),(0,o.kt)("h2",{id:"browser_contextonpage"},'browser_context.on("page")'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"type: <",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page",title:"Page"},"Page"),">")),(0,o.kt)("p",null,"The event is emitted when a new Page is created in the BrowserContext. The page may still be loading. The event will also fire for popup pages. See also ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page#pageonpopup"},'page.on("popup")')," to receive events about popups relevant to a specific page."),(0,o.kt)("p",null,"The earliest moment that page is available is when it has navigated to the initial url. For example, when opening a popup with ",(0,o.kt)("inlineCode",{parentName:"p"},"window.open('http://example.com')"),', this event will fire when the network request to "',(0,o.kt)("a",{parentName:"p",href:"http://example.com%22"},'http://example.com"')," is done and its response has started loading in the popup."),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'with context.expect_page() as page_info:\n    page.click("a[target=_blank]"),\npage = page_info.value\nprint(page.evaluate("location.href"))\n'))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'async with context.expect_page() as page_info:\n    await page.click("a[target=_blank]"),\npage = await page_info.value\nprint(await page.evaluate("location.href"))\n')))),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Use ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page#pagewait_for_load_statekwargs"},"page.wait_for_load_state(**kwargs)")," to wait until the page gets to a particular state (you should not need it in most cases)."))),(0,o.kt)("h2",{id:"browser_contextadd_cookiescookies"},"browser_context.add_cookies(cookies)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"cookies")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.List",title:"List"},"List"),"[",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict"},"Dict"),"]",">",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"name")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"value")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"url")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"> either url or domain / path are required. Optional."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"domain")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"> either url or domain / path are required Optional."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"path")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"> either url or domain / path are required Optional."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"expires")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"},"float"),"> Unix time in seconds. Optional."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"httpOnly")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"},"bool"),"> Optional."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"secure")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"},"bool"),"> Optional."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"sameSite"),' <"Strict"|"Lax"|"None"> Optional.')))),(0,o.kt)("p",null,"Adds cookies into this browser context. All pages within this context will have these cookies installed. Cookies can be obtained via ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextcookieskwargs"},"browser_context.cookies(**kwargs)"),"."),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},"browser_context.add_cookies([cookie_object1, cookie_object2])\n"))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},"await browser_context.add_cookies([cookie_object1, cookie_object2])\n")))),(0,o.kt)("h2",{id:"browser_contextadd_init_scriptkwargs"},"browser_context.add_init_script(**kwargs)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"path")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Union",title:"Union"},"Union"),"[",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),", ",(0,o.kt)("a",{parentName:"li",href:"https://realpython.com/python-pathlib/",title:"pathlib.Path"},"pathlib.Path"),"]","> Path to the JavaScript file. If ",(0,o.kt)("inlineCode",{parentName:"li"},"path")," is a relative path, then it is resolved relative to the current working directory. Optional."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"script")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"> Script to be evaluated in all pages in the browser context. Optional.")),(0,o.kt)("p",null,"Adds a script which would be evaluated in one of the following scenarios:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Whenever a page is created in the browser context or is navigated."),(0,o.kt)("li",{parentName:"ul"},"Whenever a child frame is attached or navigated in any page in the browser context. In this case, the script is evaluated in the context of the newly attached frame.")),(0,o.kt)("p",null,"The script is evaluated after the document was created but before any of its scripts were run. This is useful to amend the JavaScript environment, e.g. to seed ",(0,o.kt)("inlineCode",{parentName:"p"},"Math.random"),"."),(0,o.kt)("p",null,"An example of overriding ",(0,o.kt)("inlineCode",{parentName:"p"},"Math.random")," before the page loads:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// preload.js\nMath.random = () => 42;\n")),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'# in your playwright script, assuming the preload.js file is in same directory.\nbrowser_context.add_init_script(path="preload.js")\n'))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'# in your playwright script, assuming the preload.js file is in same directory.\nawait browser_context.add_init_script(path="preload.js")\n')))),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The order of evaluation of multiple scripts installed via ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextadd_init_scriptkwargs"},"browser_context.add_init_script(**kwargs)")," and ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page#pageadd_init_scriptkwargs"},"page.add_init_script(**kwargs)")," is not defined."))),(0,o.kt)("h2",{id:"browser_contextbrowser"},"browser_context.browser"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"returns: <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/constants.html#None",title:"None"},"NoneType"),"|",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browser",title:"Browser"},"Browser"),">")),(0,o.kt)("p",null,"Returns the browser instance of the context. If it was launched as a persistent context null gets returned."),(0,o.kt)("h2",{id:"browser_contextclear_cookies"},"browser_context.clear_cookies()"),(0,o.kt)("p",null,"Clears context cookies."),(0,o.kt)("h2",{id:"browser_contextclear_permissions"},"browser_context.clear_permissions()"),(0,o.kt)("p",null,"Clears all permission overrides for the browser context."),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'context = browser.new_context()\ncontext.grant_permissions(["clipboard-read"])\n# do stuff ..\ncontext.clear_permissions()\n'))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'context = await browser.new_context()\nawait context.grant_permissions(["clipboard-read"])\n# do stuff ..\ncontext.clear_permissions()\n')))),(0,o.kt)("h2",{id:"browser_contextclose"},"browser_context.close()"),(0,o.kt)("p",null,"Closes the browser context. All the pages that belong to the browser context will be closed."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The default browser context cannot be closed."))),(0,o.kt)("h2",{id:"browser_contextcookieskwargs"},"browser_context.cookies(**kwargs)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"urls")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"|",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.List",title:"List"},"List"),"[",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"]","> Optional list of URLs."),(0,o.kt)("li",{parentName:"ul"},"returns: <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.List",title:"List"},"List"),"[",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict"},"Dict"),"]",">",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"name")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"value")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"domain")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"path")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"expires")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"},"float"),"> Unix time in seconds."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"httpOnly")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"},"bool"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"secure")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"},"bool"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"sameSite"),' <"Strict"|"Lax"|"None">')))),(0,o.kt)("p",null,"If no URLs are specified, this method returns all cookies. If URLs are specified, only cookies that affect those URLs are returned."),(0,o.kt)("h2",{id:"browser_contextexpect_eventevent-kwargs"},"browser_context.expect_event(event, **kwargs)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"event")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"> Event name, same one would pass into ",(0,o.kt)("inlineCode",{parentName:"li"},"browserContext.on(event)"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"predicate")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Callable",title:"Callable"},"Callable"),"> Receives the event data and resolves to truthy value when the waiting should resolve."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"timeout")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"},"float"),"> Maximum time to wait for in milliseconds. Defaults to ",(0,o.kt)("inlineCode",{parentName:"li"},"30000")," (30 seconds). Pass ",(0,o.kt)("inlineCode",{parentName:"li"},"0")," to disable timeout. The default value can be changed by using the ",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_default_timeouttimeout"},"browser_context.set_default_timeout(timeout)"),"."),(0,o.kt)("li",{parentName:"ul"},"returns: <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/reference/datamodel.html#context-managers",title:"Event context manager"},"EventContextManager"),">")),(0,o.kt)("p",null,"Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the context closes before the event is fired. Returns the event data value."),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'with context.expect_event("page") as event_info:\n    page.click("button")\npage = event_info.value\n'))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'async with context.expect_event("page") as event_info:\n    await page.click("button")\npage = await event_info.value\n')))),(0,o.kt)("h2",{id:"browser_contextexpect_pagekwargs"},"browser_context.expect_page(**kwargs)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"predicate")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Callable",title:"Callable"},"Callable"),"[",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page",title:"Page"},"Page"),"]",":",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"},"bool"),"> Receives the ",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page",title:"Page"},"Page")," object and resolves to truthy value when the waiting should resolve."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"timeout")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"},"float"),"> Maximum time to wait for in milliseconds. Defaults to ",(0,o.kt)("inlineCode",{parentName:"li"},"30000")," (30 seconds). Pass ",(0,o.kt)("inlineCode",{parentName:"li"},"0")," to disable timeout. The default value can be changed by using the ",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_default_timeouttimeout"},"browser_context.set_default_timeout(timeout)"),"."),(0,o.kt)("li",{parentName:"ul"},"returns: <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/reference/datamodel.html#context-managers",title:"Event context manager"},"EventContextManager"),"[",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page",title:"Page"},"Page"),"]",">")),(0,o.kt)("p",null,"Performs action and waits for a new ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page",title:"Page"},"Page")," to be created in the context. If predicate is provided, it passes ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page",title:"Page"},"Page")," value into the ",(0,o.kt)("inlineCode",{parentName:"p"},"predicate")," function and waits for ",(0,o.kt)("inlineCode",{parentName:"p"},"predicate(event)")," to return a truthy value. Will throw an error if the context closes before new ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page",title:"Page"},"Page")," is created."),(0,o.kt)("h2",{id:"browser_contextexpose_bindingname-callback-kwargs"},"browser_context.expose_binding(name, callback, **kwargs)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"name")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"> Name of the function on the window object."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"callback")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Callable",title:"Callable"},"Callable"),"> Callback function that will be called in the Playwright's context."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"handle")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"},"bool"),"> Whether to pass the argument as a handle, instead of passing by value. When passing a handle, only one argument is supported. When passing by value, multiple arguments are supported.")),(0,o.kt)("p",null,"The method adds a function called ",(0,o.kt)("inlineCode",{parentName:"p"},"name")," on the ",(0,o.kt)("inlineCode",{parentName:"p"},"window")," object of every frame in every page in the context. When called, the function executes ",(0,o.kt)("inlineCode",{parentName:"p"},"callback")," and returns a ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise"},"Promise")," which resolves to the return value of ",(0,o.kt)("inlineCode",{parentName:"p"},"callback"),". If the ",(0,o.kt)("inlineCode",{parentName:"p"},"callback")," returns a ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise"},"Promise"),", it will be awaited."),(0,o.kt)("p",null,"The first argument of the ",(0,o.kt)("inlineCode",{parentName:"p"},"callback")," function contains information about the caller: ",(0,o.kt)("inlineCode",{parentName:"p"},"{ browserContext: BrowserContext, page: Page, frame: Frame }"),"."),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page#pageexpose_bindingname-callback-kwargs"},"page.expose_binding(name, callback, **kwargs)")," for page-only version."),(0,o.kt)("p",null,"An example of exposing page URL to all frames in all pages in the context:"),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'from playwright.sync_api import sync_playwright\n\ndef run(playwright):\n    webkit = playwright.webkit\n    browser = webkit.launch(headless=false)\n    context = browser.new_context()\n    context.expose_binding("pageURL", lambda source: source["page"].url)\n    page = context.new_page()\n    page.set_content("""\n    <script>\n      async function onClick() {\n        document.querySelector(\'div\').textContent = await window.pageURL();\n      }\n    <\/script>\n    <button onclick="onClick()">Click me</button>\n    <div></div>\n    """)\n    page.click("button")\n\nwith sync_playwright() as playwright:\n    run(playwright)\n'))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'import asyncio\nfrom playwright.async_api import async_playwright\n\nasync def run(playwright):\n    webkit = playwright.webkit\n    browser = await webkit.launch(headless=false)\n    context = await browser.new_context()\n    await context.expose_binding("pageURL", lambda source: source["page"].url)\n    page = await context.new_page()\n    await page.set_content("""\n    <script>\n      async function onClick() {\n        document.querySelector(\'div\').textContent = await window.pageURL();\n      }\n    <\/script>\n    <button onclick="onClick()">Click me</button>\n    <div></div>\n    """)\n    await page.click("button")\n\nasync def main():\n    async with async_playwright() as playwright:\n        await run(playwright)\nasyncio.run(main())\n')))),(0,o.kt)("p",null,"An example of passing an element handle:"),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'def print(source, element):\n    print(element.text_content())\n\ncontext.expose_binding("clicked", print, handle=true)\npage.set_content("""\n  <script>\n    document.addEventListener(\'click\', event => window.clicked(event.target));\n  <\/script>\n  <div>Click me</div>\n  <div>Or click me</div>\n""")\n'))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'async def print(source, element):\n    print(await element.text_content())\n\nawait context.expose_binding("clicked", print, handle=true)\nawait page.set_content("""\n  <script>\n    document.addEventListener(\'click\', event => window.clicked(event.target));\n  <\/script>\n  <div>Click me</div>\n  <div>Or click me</div>\n""")\n')))),(0,o.kt)("h2",{id:"browser_contextexpose_functionname-callback"},"browser_context.expose_function(name, callback)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"name")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"> Name of the function on the window object."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"callback")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Callable",title:"Callable"},"Callable"),"> Callback function that will be called in the Playwright's context.")),(0,o.kt)("p",null,"The method adds a function called ",(0,o.kt)("inlineCode",{parentName:"p"},"name")," on the ",(0,o.kt)("inlineCode",{parentName:"p"},"window")," object of every frame in every page in the context. When called, the function executes ",(0,o.kt)("inlineCode",{parentName:"p"},"callback")," and returns a ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise"},"Promise")," which resolves to the return value of ",(0,o.kt)("inlineCode",{parentName:"p"},"callback"),"."),(0,o.kt)("p",null,"If the ",(0,o.kt)("inlineCode",{parentName:"p"},"callback")," returns a ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",title:"Promise"},"Promise"),", it will be awaited."),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page#pageexpose_functionname-callback"},"page.expose_function(name, callback)")," for page-only version."),(0,o.kt)("p",null,"An example of adding an ",(0,o.kt)("inlineCode",{parentName:"p"},"md5")," function to all pages in the context:"),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'import hashlib\nfrom playwright.sync_api import sync_playwright\n\ndef sha1(text):\n    m = hashlib.sha1()\n    m.update(bytes(text, "utf8"))\n    return m.hexdigest()\n\n\ndef run(playwright):\n    webkit = playwright.webkit\n    browser = webkit.launch(headless=False)\n    context = browser.new_context()\n    context.expose_function("sha1", sha1)\n    page = context.new_page()\n    page.expose_function("sha1", sha1)\n    page.set_content("""\n        <script>\n          async function onClick() {\n            document.querySelector(\'div\').textContent = await window.sha1(\'PLAYWRIGHT\');\n          }\n        <\/script>\n        <button onclick="onClick()">Click me</button>\n        <div></div>\n    """)\n    page.click("button")\n\nwith sync_playwright() as playwright:\n    run(playwright)\n'))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'import asyncio\nimport hashlib\nfrom playwright.async_api import async_playwright\n\nasync def sha1(text):\n    m = hashlib.sha1()\n    m.update(bytes(text, "utf8"))\n    return m.hexdigest()\n\n\nasync def run(playwright):\n    webkit = playwright.webkit\n    browser = await webkit.launch(headless=False)\n    context = await browser.new_context()\n    await context.expose_function("sha1", sha1)\n    page = await context.new_page()\n    await page.set_content("""\n        <script>\n          async function onClick() {\n            document.querySelector(\'div\').textContent = await window.sha1(\'PLAYWRIGHT\');\n          }\n        <\/script>\n        <button onclick="onClick()">Click me</button>\n        <div></div>\n    """)\n    await page.click("button")\n\nasync def main():\n    async with async_playwright() as playwright:\n        await run(playwright)\nasyncio.run(main())\n')))),(0,o.kt)("h2",{id:"browser_contextgrant_permissionspermissions-kwargs"},"browser_context.grant_permissions(permissions, **kwargs)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"permissions")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.List",title:"List"},"List"),"[",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"]","> A permission or an array of permissions to grant. Permissions can be one of the following values:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'geolocation'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'midi'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'midi-sysex'")," (system-exclusive midi)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'notifications'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'push'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'camera'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'microphone'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'background-sync'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'ambient-light-sensor'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'accelerometer'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'gyroscope'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'magnetometer'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'accessibility-events'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'clipboard-read'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'clipboard-write'")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"'payment-handler'")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"origin")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"> The ",(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Glossary/Origin",title:"Origin"},"origin"),' to grant permissions to, e.g. "',(0,o.kt)("a",{parentName:"li",href:"https://example.com%22"},'https://example.com"'),".")),(0,o.kt)("p",null,"Grants specified permissions to the browser context. Only grants corresponding permissions to the given origin if specified."),(0,o.kt)("h2",{id:"browser_contextnew_page"},"browser_context.new_page()"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"returns: <",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page",title:"Page"},"Page"),">")),(0,o.kt)("p",null,"Creates a new page in the browser context."),(0,o.kt)("h2",{id:"browser_contextpages"},"browser_context.pages"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"returns: <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.List",title:"List"},"List"),"[",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page",title:"Page"},"Page"),"]",">")),(0,o.kt)("p",null,"Returns all open pages in the context. "),(0,o.kt)("h2",{id:"browser_contextrouteurl-handler"},"browser_context.route(url, handler)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"url")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"|",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/re.html",title:"Pattern"},"Pattern"),"|",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Callable",title:"Callable"},"Callable"),"[",(0,o.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/URL",title:"URL"},"URL"),"]",":",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"},"bool"),"> A glob pattern, regex pattern or predicate receiving ",(0,o.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/URL",title:"URL"},"URL")," to match while routing."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"handler")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Callable",title:"Callable"},"Callable"),"[",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-route",title:"Route"},"Route"),", ",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-request",title:"Request"},"Request"),"]","> handler function to route the request.")),(0,o.kt)("p",null,"Routing provides the capability to modify network requests that are made by any page in the browser context. Once route is enabled, every request matching the url pattern will stall unless it's continued, fulfilled or aborted."),(0,o.kt)("p",null,"An example of a na\xefve handler that aborts all image requests:"),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'context = browser.new_context()\npage = context.new_page()\ncontext.route("**/*.{png,jpg,jpeg}", lambda route: route.abort())\npage.goto("https://example.com")\nbrowser.close()\n'))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'context = await browser.new_context()\npage = await context.new_page()\nawait context.route("**/*.{png,jpg,jpeg}", lambda route: route.abort())\nawait page.goto("https://example.com")\nawait browser.close()\n')))),(0,o.kt)("p",null,"or the same snippet using a regex pattern instead:"),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'context = browser.new_context()\npage = context.new_page()\ncontext.route(re.compile(r"(\\.png$)|(\\.jpg$)"), lambda route: route.abort())\npage = await context.new_page()\npage = context.new_page()\npage.goto("https://example.com")\nbrowser.close()\n'))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'context = await browser.new_context()\npage = await context.new_page()\nawait context.route(re.compile(r"(\\.png$)|(\\.jpg$)"), lambda route: route.abort())\npage = await context.new_page()\nawait page.goto("https://example.com")\nawait browser.close()\n')))),(0,o.kt)("p",null,"Page routes (set up with ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page#pagerouteurl-handler"},"page.route(url, handler)"),") take precedence over browser context routes when request matches both handlers."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Enabling routing disables http cache."))),(0,o.kt)("h2",{id:"browser_contextset_default_navigation_timeouttimeout"},"browser_context.set_default_navigation_timeout(timeout)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"timeout")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"},"float"),"> Maximum navigation time in milliseconds")),(0,o.kt)("p",null,"This setting will change the default maximum navigation time for the following methods and related shortcuts:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page#pagego_backkwargs"},"page.go_back(**kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page#pagego_forwardkwargs"},"page.go_forward(**kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page#pagegotourl-kwargs"},"page.goto(url, **kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page#pagereloadkwargs"},"page.reload(**kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page#pageset_contenthtml-kwargs"},"page.set_content(html, **kwargs)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-page#pageexpect_navigationkwargs"},"page.expect_navigation(**kwargs)"))),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page#pageset_default_navigation_timeouttimeout"},"page.set_default_navigation_timeout(timeout)")," and ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page#pageset_default_timeouttimeout"},"page.set_default_timeout(timeout)")," take priority over ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_default_navigation_timeouttimeout"},"browser_context.set_default_navigation_timeout(timeout)"),"."))),(0,o.kt)("h2",{id:"browser_contextset_default_timeouttimeout"},"browser_context.set_default_timeout(timeout)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"timeout")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"},"float"),"> Maximum time in milliseconds")),(0,o.kt)("p",null,"This setting will change the default maximum time for all the methods accepting ",(0,o.kt)("inlineCode",{parentName:"p"},"timeout")," option."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page#pageset_default_navigation_timeouttimeout"},"page.set_default_navigation_timeout(timeout)"),", ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page#pageset_default_timeouttimeout"},"page.set_default_timeout(timeout)")," and ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_default_navigation_timeouttimeout"},"browser_context.set_default_navigation_timeout(timeout)")," take priority over ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_default_timeouttimeout"},"browser_context.set_default_timeout(timeout)"),"."))),(0,o.kt)("h2",{id:"browser_contextset_extra_http_headersheaders"},"browser_context.set_extra_http_headers(headers)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"headers")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict"},"Dict"),"[",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),", ",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"]","> An object containing additional HTTP headers to be sent with every request. All header values must be strings.")),(0,o.kt)("p",null,"The extra HTTP headers will be sent with every request initiated by any page in the context. These headers are merged with page-specific extra HTTP headers set with ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-page#pageset_extra_http_headersheaders"},"page.set_extra_http_headers(headers)"),". If page overrides a particular header, page-specific header value will be used instead of the browser context header value."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_extra_http_headersheaders"},"browser_context.set_extra_http_headers(headers)")," does not guarantee the order of headers in the outgoing requests."))),(0,o.kt)("h2",{id:"browser_contextset_geolocationgeolocation"},"browser_context.set_geolocation(geolocation)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"geolocation")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/constants.html#None",title:"None"},"NoneType"),"|",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict"},"Dict"),">",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"latitude")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"},"float"),"> Latitude between -90 and 90."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"longitude")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"},"float"),"> Longitude between -180 and 180."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"accuracy")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"},"float"),"> Non-negative accuracy value. Defaults to ",(0,o.kt)("inlineCode",{parentName:"li"},"0"),".")))),(0,o.kt)("p",null,"Sets the context's geolocation. Passing ",(0,o.kt)("inlineCode",{parentName:"p"},"null")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"undefined")," emulates position unavailable."),(0,o.kt)(i.Z,{groupId:"python-flavor",defaultValue:"sync",values:[{label:"Sync",value:"sync"},{label:"Async",value:"async"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"sync",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'browser_context.set_geolocation({"latitude": 59.95, "longitude": 30.31667})\n'))),(0,o.kt)(l.Z,{value:"async",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py"},'await browser_context.set_geolocation({"latitude": 59.95, "longitude": 30.31667})\n')))),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Consider using ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextgrant_permissionspermissions-kwargs"},"browser_context.grant_permissions(permissions, **kwargs)")," to grant permissions for the browser context pages to read its geolocation."))),(0,o.kt)("h2",{id:"browser_contextset_offlineoffline"},"browser_context.set_offline(offline)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"offline")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"},"bool"),"> Whether to emulate network being offline for the browser context.")),(0,o.kt)("h2",{id:"browser_contextstorage_statekwargs"},"browser_context.storage_state(**kwargs)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"path")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Union",title:"Union"},"Union"),"[",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),", ",(0,o.kt)("a",{parentName:"li",href:"https://realpython.com/python-pathlib/",title:"pathlib.Path"},"pathlib.Path"),"]","> The file path to save the storage state to. If ",(0,o.kt)("inlineCode",{parentName:"li"},"path")," is a relative path, then it is resolved relative to current working directory. If no path is provided, storage state is still returned, but won't be saved to the disk."),(0,o.kt)("li",{parentName:"ul"},"returns: <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict"},"Dict"),">",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"cookies")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.List",title:"List"},"List"),"[",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict"},"Dict"),"]",">",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"name")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"value")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"domain")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"path")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"expires")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"},"float"),"> Unix time in seconds."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"httpOnly")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"},"bool"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"secure")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"},"bool"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"sameSite"),' <"Strict"|"Lax"|"None">'))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"origins")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.List",title:"List"},"List"),"[",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict"},"Dict"),"]",">",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"origin")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"localStorage")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.List",title:"List"},"List"),"[",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Dict",title:"Dict"},"Dict"),"]",">",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"name")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"value")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),">")))))))),(0,o.kt)("p",null,"Returns storage state for this browser context, contains current cookies and local storage snapshot."),(0,o.kt)("h2",{id:"browser_contextunrouteurl-kwargs"},"browser_context.unroute(url, **kwargs)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"url")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"|",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/re.html",title:"Pattern"},"Pattern"),"|",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Callable",title:"Callable"},"Callable"),"[",(0,o.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/URL",title:"URL"},"URL"),"]",":",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html",title:"bool"},"bool"),"> A glob pattern, regex pattern or predicate receiving ",(0,o.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/URL",title:"URL"},"URL")," used to register a routing with ",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextrouteurl-handler"},"browser_context.route(url, handler)"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"handler")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Callable",title:"Callable"},"Callable"),"[",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-route",title:"Route"},"Route"),", ",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-request",title:"Request"},"Request"),"]","> Optional handler function used to register a routing with ",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextrouteurl-handler"},"browser_context.route(url, handler)"),".")),(0,o.kt)("p",null,"Removes a route created with ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextrouteurl-handler"},"browser_context.route(url, handler)"),". When ",(0,o.kt)("inlineCode",{parentName:"p"},"handler")," is not specified, removes all routes for the ",(0,o.kt)("inlineCode",{parentName:"p"},"url"),"."),(0,o.kt)("h2",{id:"browser_contextwait_for_eventevent-kwargs"},"browser_context.wait_for_event(event, **kwargs)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"event")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str",title:"str"},"str"),"> Event name, same one typically passed into ",(0,o.kt)("inlineCode",{parentName:"li"},"*.on(event)"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"predicate")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Callable",title:"Callable"},"Callable"),"> Receives the event data and resolves to truthy value when the waiting should resolve."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"timeout")," <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex",title:"float"},"float"),"> Maximum time to wait for in milliseconds. Defaults to ",(0,o.kt)("inlineCode",{parentName:"li"},"30000")," (30 seconds). Pass ",(0,o.kt)("inlineCode",{parentName:"li"},"0")," to disable timeout. The default value can be changed by using the ",(0,o.kt)("a",{parentName:"li",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextset_default_timeouttimeout"},"browser_context.set_default_timeout(timeout)"),"."),(0,o.kt)("li",{parentName:"ul"},"returns: <",(0,o.kt)("a",{parentName:"li",href:"https://docs.python.org/3/library/typing.html#typing.Any",title:"Any"},"Any"),">")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"In most cases, you should use ",(0,o.kt)("a",{parentName:"p",href:"/python/docs/1.9.0/api/class-browsercontext#browser_contextexpect_eventevent-kwargs"},"browser_context.expect_event(event, **kwargs)"),"."))),(0,o.kt)("p",null,"Waits for given ",(0,o.kt)("inlineCode",{parentName:"p"},"event")," to fire. If predicate is provided, it passes event's value into the ",(0,o.kt)("inlineCode",{parentName:"p"},"predicate")," function and waits for ",(0,o.kt)("inlineCode",{parentName:"p"},"predicate(event)")," to return a truthy value. Will throw an error if the socket is closed before the ",(0,o.kt)("inlineCode",{parentName:"p"},"event")," is fired."))}d.isMDXComponent=!0},6010:function(e,t,a){"use strict";function n(e){var t,a,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=n(e[t]))&&(r&&(r+=" "),r+=a);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,a=0,r="";a<arguments.length;)(e=arguments[a++])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}a.d(t,{Z:function(){return r}})}}]);